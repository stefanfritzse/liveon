{% extends "base.html" %}

{% block hero %}
  <h1>Longevity Tips</h1>
  <p>Quick, actionable reminders from the Live On coach to keep your habits aligned with healthy aging.</p>
{% endblock %}

{% block content %}
  {% if featured_tip %}
    <section class="tip-feature">
      <article>
        <header>
          <p class="eyebrow">Featured today</p>
          <h2>{{ featured_tip.title }}</h2>
          <p class="article-meta">Published {{ featured_tip.published_date.strftime("%B %d, %Y") }}</p>
        </header>
        <div class="tip-body">
          {{ featured_tip.content_body | markdown_to_html }}
        </div>
        {% if featured_tip.tags %}
          <footer><strong>Tags:</strong> {{ featured_tip.tags | join(', ') }}</footer>
        {% endif %}
      </article>
    </section>
  {% else %}
    <p class="empty-state">No tips have been published yet. Check back soon or return to the <a href="/">homepage</a> for platform updates.</p>
  {% endif %}

  {% if recent_tips %}
    <h2>Earlier tips</h2>
    <div class="card-grid">
      {% for tip in recent_tips %}
        <article>
          <header>
            <h3>{{ tip.title }}</h3>
            <p class="article-meta">Published {{ tip.published_date.strftime("%B %d, %Y") }}</p>
          </header>
          {% set snippet = tip.content_body | markdown_to_text %}
          <p>
            {{ snippet[:220] }}{% if snippet|length > 220 %}&hellip;{% endif %}
          </p>
          {% if snippet|length > 220 %}
          <details class="tip-body">
            <summary>Expand full guidance</summary>
            {{ tip.content_body | markdown_to_html }}
          </details>
          {% else %}
          <div class="tip-body">
            {{ tip.content_body | markdown_to_html }}
          </div>
          {% endif %}
          {% if tip.tags %}
            <footer><strong>Tags:</strong> {{ tip.tags | join(', ') }}</footer>
          {% endif %}
        </article>
      {% endfor %}
    </div>
  {% elif featured_tip %}
    <p class="empty-state">You're all caught upâ€”more coaching tips will appear here as they are published.</p>
  {% endif %}

  <p><a href="/">Back to homepage</a></p>
{% endblock %}
