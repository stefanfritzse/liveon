{% extends "base.html" %}

{% block hero %}
  <div class="grid">
    <div>
      <h1>Your AI-guided path to longevity.</h1>
      <p>
        Live On curates the latest science-backed guidance on healthy aging. Explore
        featured articles, actionable tips, and soon chat with an AI longevity coach.
      </p>
      <div class="grid">
        <a role="button" href="/articles">Browse Articles</a>
        <a role="button" class="secondary" href="/tips">See Past Tips</a>
      </div>
    </div>
    <div>
      <article class="tip-of-day">
        <header>
          <p class="eyebrow">Tip of the Day</p>
          <h3>{{ featured_tip.title if featured_tip else "Fresh coaching tips are on the way" }}</h3>
          {% if featured_tip %}
            <p class="article-meta">Published {{ featured_tip.published_date.strftime("%B %d, %Y") }}</p>
          {% endif %}
        </header>
        <p>
          {% if featured_tip %}
            {{ featured_tip.content_body }}
          {% else %}
            We're preparing the first batch of AI-authored coaching tips. Once the database is
            seeded you'll see a highlighted recommendation here each day.
          {% endif %}
        </p>
        <footer>
          <a href="/tips">Browse the tips archive</a>
        </footer>
      </article>
    </div>
  </div>
{% endblock %}

{% block content %}
  <section>
    <h2>Latest Articles</h2>
    {% if articles %}
      <div class="card-grid">
        {% for article in articles %}
          <article>
            <header>
              <h3>{{ article.title }}</h3>
              <p class="article-meta">Published {{ article.published_date.strftime("%B %d, %Y") }}</p>
            </header>
            {% set summary_source = article.summary if article.summary else article.content_body %}
            {% set summary_text = summary_source | markdown_to_text %}
            <p>{{ summary_text[:200] }}{% if summary_text|length > 200 %}â€¦{% endif %}</p>
            {% if article.id %}
              <footer><a href="/articles/{{ article.id }}">Read full article</a></footer>
            {% endif %}
          </article>
        {% endfor %}
      </div>
    {% else %}
      <p>No articles are available yet. Seed the database to preview dynamic content.</p>
    {% endif %}
  </section>

  <section>
    <h2>Recent Coaching Tips</h2>
    {% if recent_tips %}
      <div class="card-grid">
        {% for tip in recent_tips %}
          <article>
            <header>
              <h3>{{ tip.title }}</h3>
              <p class="article-meta">Published {{ tip.published_date.strftime("%B %d, %Y") }}</p>
            </header>
            <p>{{ tip.content_body }}</p>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <p>No additional tips yet. Visit the tips page to explore the archive once it's populated.</p>
    {% endif %}
  </section>

  
{% endblock %}
