{% extends "base.html" %}

{% block hero %}
  <h1>Longevity Articles</h1>
  <p>Curated research summaries and guides generated by the Live On content pipeline.</p>
{% endblock %}

{% block content %}
  {% if articles %}
    <div class="card-grid">
      {% for article in articles %}
        <article>
          <header>
            <h3>{{ article.title }}</h3>
            <p class="article-meta">Published {{ article.published_date.strftime("%B %d, %Y") }}</p>
          </header>
          {% set summary_source = article.summary if article.summary else article.content_body %}
          {% set summary_text = summary_source | markdown_to_text %}
          <p>{{ summary_text[:240] }}{% if summary_text|length > 240 %}â€¦{% endif %}</p>
          {% if article.id %}
            <footer><a href="/articles/{{ article.id }}">Read full article</a></footer>
          {% endif %}
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p>No articles are available yet. Once the AI pipeline is connected, fresh research will appear here automatically.</p>
  {% endif %}
{% endblock %}
